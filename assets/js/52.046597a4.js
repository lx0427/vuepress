(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{417:function(t,s,a){"use strict";a.r(s);var n=a(26),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"dns-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns-配置"}},[t._v("#")]),t._v(" dns 配置")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("值")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("TTL")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("A")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("@")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("160.251.21.249")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("600 秒")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("A")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("mail")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("160.251.21.249")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("600 秒")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("imap")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("mail.gamermart.jp")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("600 秒")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("pop")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("mail.gamermart.jp")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("600 秒")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("pop3")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("mail.gamermart.jp")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("600 秒")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("smtp")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("mail.gamermart.jp")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("600 秒")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("MX")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("gamermart.jp")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("mail.gamermart.jp(优先:1)")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("600 秒")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("--")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("--")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("--")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("--")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("enterpriseenrollment")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("enterpriseenrollment.manage.microsoft.com")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("enterpriseregistration")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("enterpriseregistration.windows.net")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("lyncdiscover")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("webdir.online.lync.com")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sip")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sipdir.online.lync.com")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("MX")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("@")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("gamermart-jp.mail.protection.outlook.com")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("TXT")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("@")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("v=spf1 include:spf.protection.outlook.com -all")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("CNAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("autodiscover")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("autodiscover.outlook.com")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("SRV")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("_sip _tls @")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sipdir.online.lync.com 100 1 443")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("SRV")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("_sipfederationtls _tcp @")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("sipfed.online.lync.com 100 1 5061")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1 小时")])])])]),t._v(" "),a("h3",{attrs:{id:"域名基础了解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#域名基础了解"}},[t._v("#")]),t._v(" 域名基础了解")]),t._v(" "),a("ul",[a("li",[t._v("A: 主机记录")]),t._v(" "),a("li",[t._v("MX: 邮件交换记录")]),t._v(" "),a("li",[t._v("CNAME: 别名")])]),t._v(" "),a("h3",{attrs:{id:"spf-设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spf-设置"}},[t._v("#")]),t._v(" spf 设置")]),t._v(" "),a("blockquote",[a("p",[t._v("如果除了邮件服务器，网站也可能直接发邮件，也可能通过中继服务器发邮件")])]),t._v(" "),a("p",[t._v("| TXT | @ | v=spf1 a mx ip4:160.251.21.249 ip4:160.251.21.249 ~all | 600 秒 |")]),t._v(" "),a("h2",{attrs:{id:"服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器"}},[t._v("#")]),t._v(" 服务器")]),t._v(" "),a("h3",{attrs:{id:"swap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swap"}},[t._v("#")]),t._v(" swap")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看swap")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" -m\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"hostname-设置为你的域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hostname-设置为你的域名"}},[t._v("#")]),t._v(" hostname 设置为你的域名")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hostname")]),t._v(" mail.gamermart.jp\nhostnamectl set-hostname mail.gamermart.jp\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"docker-搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-搭建"}},[t._v("#")]),t._v(" docker 搭建")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://hub.docker.com/r/bestwu/ewomail/",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker bestwu/ewomail 文档"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拉取镜像")]),t._v("\ndocker pull bestwu/ewomail\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建本地映射目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /home/ewomail/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("mysql,vmail,rainloop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /home/ewomail/ssl/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("certs,private,dkim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mail.gamermart.jp 更换为自己的域名")]),t._v("\ndocker run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("81")]),t._v(":81 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(":443 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -h mail.gamermart.jp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MYSQL_ROOT_PASSWORD=123456"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SOGO_WORKERS=1"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TZ=Europe/Prague"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POSTMASTER_PASSWORD={PLAIN}123456"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"IREDAPD_PLUGINS=['reject_null_sender', 'reject_sender_login_mismatch', 'greylisting', 'throttle', 'amavisd_wblist', 'sql_alias_access_policy']\"")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -v /home/iredmail/mysql:/var/lib/mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -v /home/iredmail/vmail:/var/vmail "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           -v /home/iredmail/clamav:/var/lib/clamav "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n           --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("iredmail lejmr/iredmail:mysql-latest\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("h3",{attrs:{id:"_10024-错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10024-错误"}},[t._v("#")]),t._v(" 10024 错误")]),t._v(" "),a("p",[t._v("错误原因：10024 端口跑的服务主要用于 ewomail 中反垃圾反病毒作用，然而 docker 镜像中没有集成，所以会无法接收到邮件。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it ewomail /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/postfix/main.cf\n:737\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注释 content_filter = smtp-amavis:[127.0.0.1]:10024")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"dkim-设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dkim-设置"}},[t._v("#")]),t._v(" DKIM 设置")]),t._v(" "),a("blockquote",[a("p",[t._v("DKIM 是电子邮件验证标准，域名密钥识别邮件标准，主要是用来防止被判定为垃圾邮件。\n每个域名都需要添加一个 dkim 的 key，EwoMail 默认安装后已自动添加主域名 dkim，只需要设置好 dkim 的 dns 即可。")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" ewomail amavisd showkeys\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ; key#1, domain gamermart.jp, /ewomail/dkim/mail.pem")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# dkim._domainkey.gamermart.jp.\t3600 TXT (")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   "v=DKIM1; p="')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDB33JFXj3+sJ/TSM0ZbvRqYKgO"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   "pOYnxHXj5/9I2m/lM4tU0PmPj7j5vQOd8+2VYUu5YwAh4EAABVD1kml7lqk0cP7b"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   "OoP0wJHc0csAXevjIj9Z0uEhdrf96LTsPU1KwWk3YToF+iZjrQoG2BULnE8ql2HT"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   "rY1T3PhSIkc1K1F9+wIDAQAB")')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("blockquote",[a("p",[t._v("将内容拷贝至"),a("a",{attrs:{href:"https://www.osyum.com/EwoMail/",target:"_blank",rel:"noopener noreferrer"}},[t._v("DKIM 整理"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("| TXT | "),a("code",[t._v("dkim._domainkey")]),t._v(" | v=DKIM1;p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDB33JFXj3+sJ/TSM0ZbvRqYKgOpOYnxHXj5/9I2m/lM4tU0PmPj7j5vQOd8+2VYUu5YwAh4EAABVD1kml7lqk0cP7bOoP0wJHc0csAXevjIj9Z0uEhdrf96LTsPU1KwWk3YToF+iZjrQoG2BULnE8ql2HTrY1T3PhSIkc1K1F9+wIDAQAB | 600 秒 |")]),t._v(" "),a("blockquote",[a("p",[t._v("十分钟后验证生效")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" ewomail amavisd testkeys\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TESTING#1: dkim._domainkey.gamermart.jp      => pass")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"访问地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问地址"}},[t._v("#")]),t._v(" 访问地址")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://doc.ewomail.com/docs/ewomail/jianjie",target:"_blank",rel:"noopener noreferrer"}},[t._v("ewomail 官方文档"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("邮件管理后台")])]),t._v(" "),a("ul",[a("li",[t._v("地址：http://gamermart.jp:8080")]),t._v(" "),a("li",[t._v("账号密码：admin/ewomail123")]),t._v(" "),a("li",[t._v("添加邮箱密码，即可登录用户邮件平台")])]),t._v(" "),a("blockquote",[a("p",[t._v("Rainloop 管理端")])]),t._v(" "),a("ul",[a("li",[t._v("地址：http://gamermart.jp:8000/?admin")]),t._v(" "),a("li",[t._v("账号密码：admin/12345")])]),t._v(" "),a("blockquote",[a("p",[t._v("用户邮件平台")])]),t._v(" "),a("p",[t._v("http://gamermart.jp:8000")]),t._v(" "),a("h2",{attrs:{id:"nodemailer-连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodemailer-连接"}},[t._v("#")]),t._v(" nodemailer 连接")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toMail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" emailOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mail.gamermart.jp'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    secure"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// use SSL 465  //no use 587")]),t._v("\n    auth"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root@gamermart.jp'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// user name")]),t._v("\n      pass"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12345678'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// password")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tls"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      rejectUnauthorized"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" transporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nodemailer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTransport")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("emailOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mailOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GamerMart"<')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("emailOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// sender address mailfrom must be same with the user")]),t._v("\n    to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" toMail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// list of receivers")]),t._v("\n    subject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Subject line")]),t._v("\n    text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plaintext body")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用回调函数记录状态")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("mailOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mailOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" info "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mailOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);